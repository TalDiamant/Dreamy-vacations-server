(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{212:function(e,t,a){e.exports=a(435)},221:function(e,t,a){},224:function(e,t,a){},431:function(e,t){},435:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(48),i=a.n(r),c=a(15),o=a(171),l=a(49),d=a(19),u=a(37),p={placeholder:"placeholder",currentUser:"",currentUserid:0,loggedIn:0,isAdmin:0,username_signin:"",password_signin:"",first_name:"",last_name:"",username:"",password:"",verify_password:"",signup_msg:"",signup_ok:0,signup_process:0,user_vacations_status:"",allvacations:[],user_followed_vacations:[],all_followed_vacations:[],admin_vacations:[],followers_count:""},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,a={};switch(t.type){case"INPUT_CHANGE":return a=Object.assign({},e,Object(u.a)({},t.data.name,t.data.value));case"REQUIRED_FIELDS":return a=Object.assign({},e,{signup_msg:"Please fill out all fields"});case"REQUIRED_PASSWORD":return a=Object.assign({},e,{signup_msg:"Please check your password"});case"START_SIGNUP":return a=Object.assign({},e,{signup_ok:0});case"USER_CREATED":return a=Object.assign({},e,{signup_msg:"Thank you! Redirecting...",signup_ok:1,signup_process:1,currentUser:t.data.firstname,currentUserid:t.data.userid});case"SIGNUP_ERR":return a=Object.assign({},e,{signup_ok:0,signup_process:1});case"FINISH_SIGNUP":return a=Object.assign({},e,{signup_msg:"",signup_process:0});case"USER_LOGIN":return a=Object.assign({},e,{loggedIn:1,currentUser:t.data.firstname,currentUserid:t.data.userid});case"USER_LOGOUT":return a=Object.assign({},e,{loggedIn:0,currentUser:"",currentUserid:0});case"ADMIN_LOGIN":return a=Object.assign({},e,{loggedIn:1,isAdmin:1,currentUser:t.data.firstname,currentUserid:t.data.userid});case"START_USER_VACATIONS":return a=Object.assign({},e,{user_vacations_status:"Loading vacations..."});case"FINISH_USER_VACATIONS":return a=Object.assign({},e,{allvacations:t.data.allWebVacations,user_followed_vacations:t.data.userFavoriteVacations,user_vacations_status:""});case"START_ADMIN_VACATIONS":return a=Object.assign({},e,{admin_vacations_status:"Loading..."});case"FINISH_ADMIN_VACATIONS":return a=Object.assign({},e,{admin_vacations:t.data,admin_vacations_status:""});case"CHANGE_INPUT":return(a=Object.assign({},e,{admin_vacations_status:"Input changed"})).date=Date.now(),a;case"DELETE_VACATION":return a=Object.assign({},e,{admin_vacations_status:"Vacation was deleted!",user_vacations_status:"Vacation was deleted!",allvacations:t.data.allvacations,admin_vacations:t.data.allvacations,user_followed_vacations:t.data.alluservacations});case"UPDATE_VACATION":return a=Object.assign({},e,{admin_vacations_status:"Vacation was updated!",user_vacations_status:"Vacation was updated!",allvacations:t.data.allvacations,admin_vacations:t.data.allvacations,user_followed_vacations:t.data.alluservacations});case"FOLLOW_VACATION":case"UNFOLLOW_VACATION":return a=Object.assign({},e,{all_followed_vacations:t.data.alluservacations});case"ADDED_NEW_VACATION":return a=Object.assign({},e,{allvacations:t.data.vacationswithnew,admin_vacations:t.data.vacationswithnew});case"DOWN_FOLLOWED_VACATIONS":return a=Object.assign({},e,{all_followed_vacations:t.data});case"COUNT_FOLLOWERS":return a=Object.assign({},e,{followers_count:t.data});default:return e}},h=a(173),f=(a(221),a(8)),g=a.n(f),v=a(12),_=a(16),b=a(17),E=a(20),w=a(18),N=a(21),y=a(40),O=(a(224),function(e){return{type:"INPUT_CHANGE",data:e}}),j=function(e){return{type:"USER_LOGIN",data:e}},U=function(e){return{type:"ADMIN_LOGIN",data:e}},C=function(e){return function(){var t=Object(v.a)(g.a.mark(function t(a){var n,s;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"START_USER_VACATIONS",data:null}),console.log("fetching users vacations..."),t.next=4,fetch("http://18.218.236.231/vacations?userid="+e);case 4:return n=t.sent,t.next=7,n.json();case 7:s=t.sent,a({type:"FINISH_USER_VACATIONS",data:s}),console.log(s);case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},A=function(){return function(){var e=Object(v.a)(g.a.mark(function e(t){var a,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"START_ADMIN_VACATIONS",data:null}),console.log("fetching admin's vacations..."),e.next=4,fetch("http://18.218.236.231/vacations/adminvacations");case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,t({type:"FINISH_ADMIN_VACATIONS",data:n}),console.log(n),t({type:"FINISH_ADMIN_DOWN",data:null});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},S=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(E.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(s)))).state={signin_msg:""},a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"container-fluid"},s.a.createElement("div",{className:"row no-gutter"},s.a.createElement("div",{className:"d-none d-md-flex col-md-4 col-lg-6 bg-image-signin"}),s.a.createElement("div",{className:"col-md-8 col-lg-6"},s.a.createElement("div",{className:"login d-flex align-items-center"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-9 col-lg-8 mx-auto"},s.a.createElement("h3",{className:"login-heading mb-4"},"Welcome back!"),s.a.createElement("div",{className:"form-label-group"},s.a.createElement("input",{name:"username_signin",onChange:this.handleChange.bind(this),type:"text",id:"inputUsername",className:"form-control",placeholder:"Username",required:!0,autoFocus:!0}),s.a.createElement("label",{htmlFor:"inputUsername"},"Username")),s.a.createElement("div",{className:"form-label-group"},s.a.createElement("input",{name:"password_signin",onChange:this.handleChange.bind(this),type:"password",id:"inputPassword",className:"form-control",placeholder:"Password",required:!0}),s.a.createElement("label",{htmlFor:"inputPassword"},"Password")),s.a.createElement("button",{onClick:this.sendSignin.bind(this),className:"btn btn-lg btn-primary btn-block btn-login text-uppercase font-weight-bold mb-2",type:"submit"},"Sign in"),s.a.createElement("label",{className:"ml-3 text-danger"},this.state.signin_msg))))))))}},{key:"handleChange",value:function(e){var t={name:e.target.name,value:e.target.value};this.props.dispatchInputChange(t)}},{key:"sendSignin",value:function(){var e=Object(v.a)(g.a.mark(function e(){var t,a,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={usernameSignin:this.props.username_signin,passwordSignin:this.props.password_signin},e.next=3,fetch("http://18.218.236.231/users/signin",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return a=e.sent,e.next=6,a.json();case 6:0!==(n=e.sent).length?n[0].isAdmin?(this.props.dispatchAdminLogin(n[0]),this.setState({signin_msg:""}),alert("Welcome, admin"),this.props.history.push("/admin")):(this.props.dispatchUserLogin(n[0]),this.setState({signin_msg:""}),alert("Logged in! Redirecting..."),this.props.history.push("/")):this.setState({signin_msg:"Please check username/password and try again"});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(n.Component),k=Object(d.b)(function(e){return{username_signin:e.username_signin,password_signin:e.password_signin,placeholder:e.placeholder}},function(e){return{dispatchInputChange:function(t){e(O(t))},dispatchUserLogin:function(t){e(j(t))},dispatchAdminLogin:function(t){e(U(t))}}})(S),x=Object(y.e)(k),I=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(E.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(s)))).state={},a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"componentDidUpdate",value:function(e){e.signup_process&&(this.props.signup_ok?(this.props.dispatchUserLogin({userid:this.props.currentUserid,firstname:this.props.currentUser}),alert("Thank you for signing! Redirecting..."),this.props.history.push("/")):alert("Please try other username"))}},{key:"render",value:function(){return s.a.createElement("div",{className:"container-fluid"},s.a.createElement("div",{className:"row no-gutter"},s.a.createElement("div",{className:"d-none d-md-flex col-md-4 col-lg-6 bg-image-signup"}),s.a.createElement("div",{className:"col-md-8 col-lg-6"},s.a.createElement("div",{className:"login d-flex align-items-center"},s.a.createElement("div",{className:"container container-signup"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-9 col-lg-8 mx-auto mt-5"},s.a.createElement("h3",{className:"login-heading mb-4"},"Join us!"),s.a.createElement("div",{className:"form-label-group"},s.a.createElement("input",{name:"first_name",onChange:this.handleChange.bind(this),type:"text",id:"inputFirstname",className:"form-control",placeholder:"First Name",required:!0,autoFocus:!0}),s.a.createElement("label",{htmlFor:"inputFirstname"},"First Name")),s.a.createElement("div",{className:"form-label-group"},s.a.createElement("input",{name:"last_name",onChange:this.handleChange.bind(this),type:"text",id:"inputLastname",className:"form-control",placeholder:"Last Name",required:!0}),s.a.createElement("label",{htmlFor:"inputLastname"},"Last Name")),s.a.createElement("div",{className:"form-label-group"},s.a.createElement("input",{name:"username",onChange:this.handleChange.bind(this),type:"text",id:"inputUsername",className:"form-control",placeholder:"Username",required:!0}),s.a.createElement("label",{htmlFor:"inputUsername"},"Username")),s.a.createElement("div",{className:"form-label-group"},s.a.createElement("input",{name:"password",onChange:this.handleChange.bind(this),type:"text",id:"inputPassword",className:"form-control",placeholder:"Password",required:!0}),s.a.createElement("label",{htmlFor:"inputPassword"},"Password")),s.a.createElement("div",{className:"form-label-group"},s.a.createElement("input",{name:"verify_password",onChange:this.handleChange.bind(this),type:"text",id:"inputVerifyPassword",className:"form-control",placeholder:"Verify password",required:!0}),s.a.createElement("label",{htmlFor:"inputVerifyPassword"},"Verify password")),s.a.createElement("button",{onClick:this.sendSignup.bind(this),className:"btn btn-lg btn-primary btn-block btn-login text-uppercase font-weight-bold mb-2"},"Sign-up"),s.a.createElement("label",{className:"ml-3 text-danger"},this.props.signup_msg))))))))}},{key:"handleChange",value:function(e){var t={name:e.target.name,value:e.target.value};this.props.dispatchInputChange(t)}},{key:"sendSignup",value:function(){""!==this.props.first_name&&""!==this.props.last_name&&""!==this.props.username&&""!==this.props.password&&""!==this.props.verify_password&&this.props.password===this.props.verify_password?this.props.dispatchSignUpUser({first_name:this.props.first_name,last_name:this.props.last_name,username:this.props.username,password:this.props.password,verify_password:this.props.verify_password}):this.props.password!==this.props.verify_password?this.props.dispatchRequiredPasssword():this.props.dispatchRequiredFields()}}]),t}(n.Component),D=Object(d.b)(function(e){return{placeholder:e.placeholder,first_name:e.first_name,last_name:e.last_name,username:e.username,password:e.password,verify_password:e.verify_password,signup_msg:e.signup_msg,signup_ok:e.signup_ok,signup_process:e.signup_process,currentUser:e.currentUser,currentUserid:e.currentUserid}},function(e){return{dispatchInputChange:function(t){e(O(t))},dispatchSignUpUser:function(t){e(function(e){return function(){var t=Object(v.a)(g.a.mark(function t(a){var n,s;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"START_SIGNUP",data:null}),t.next=3,fetch("http://18.218.236.231/users/signup",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});case 3:return n=t.sent,t.next=6,n.json();case 6:s=t.sent,console.log(s),"User has signed-up"===s.msg?(a({type:"USER_CREATED",data:s}),console.log("User has signed-up"),a({type:"FINISH_SIGNUP",data:null})):(a({type:"SIGNUP_ERR",data:s}),a({type:"FINISH_SIGNUP",data:null}));case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}(t))},dispatchUserLogin:function(t){e(j(t))},dispatchRequiredFields:function(){e({type:"REQUIRED_FIELDS",data:null})},dispatchRequiredPasssword:function(){e({type:"REQUIRED_PASSWORD",data:null})}}})(I),T=Object(y.e)(D),V=a(14),F=a(436),L=a(437),R=a(438),P=a(439),G=a(440),M=a(441),W=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(E.a)(this,Object(w.a)(t).call(this,e))).state={},a.toggle=a.toggle.bind(Object(V.a)(Object(V.a)(a))),a.state={isOpen:!1},a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return this.props.isAdmin?s.a.createElement("div",null,s.a.createElement(F.a,{light:!0,expand:"md",className:"guest-nav fixed-top"},s.a.createElement(L.a,{href:"/"},"Dreamy"),s.a.createElement(R.a,{onClick:this.toggle}),s.a.createElement(P.a,{isOpen:this.state.isOpen,navbar:!0},s.a.createElement(G.a,{className:"ml-auto",navbar:!0},s.a.createElement(M.a,null,s.a.createElement(c.b,{className:"hellocurrent"},"Hello, ",this.props.currentUser)),s.a.createElement(M.a,null,s.a.createElement(c.b,{to:"/",className:"user-logout",onClick:this.Logout.bind(this)},"Logout")))))):this.props.loggedIn?s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement(F.a,{light:!0,expand:"md",className:"guest-nav fixed-top"},s.a.createElement(L.a,{href:"/"},"Dreamy"),s.a.createElement(R.a,{onClick:this.toggle}),s.a.createElement(P.a,{isOpen:this.state.isOpen,navbar:!0},s.a.createElement(G.a,{className:"ml-auto",navbar:!0},s.a.createElement(M.a,null,s.a.createElement(c.b,{className:"hellocurrent"},"Hello, ",this.props.currentUser)),s.a.createElement(M.a,null,s.a.createElement(c.b,{to:"/",className:"user-logout",onClick:this.Logout.bind(this)},"Logout")))))),s.a.createElement("div",{className:"container"},s.a.createElement("header",{className:"jumbotron jumbo-user"},s.a.createElement("h1",{className:"display-3"},"Welcome, ",this.props.currentUser),s.a.createElement("h1",{className:"lead"},"Your vacation starts here!")))):s.a.createElement("div",null,s.a.createElement(F.a,{light:!0,expand:"md",className:"guest-nav fixed-top"},s.a.createElement(L.a,{href:"/"},"Dreamy"),s.a.createElement(R.a,{onClick:this.toggle}),s.a.createElement(P.a,{isOpen:this.state.isOpen,navbar:!0},s.a.createElement(G.a,{className:"ml-auto",navbar:!0},s.a.createElement(M.a,null,s.a.createElement(c.b,{to:"/signin",className:"signin-welcome",onClick:this.toggle.bind(this)},"Sign-in")),s.a.createElement(M.a,null,s.a.createElement(c.b,{to:"/signup",className:"signup-welcome",onClick:this.toggle.bind(this)},"Sign-up"))))))}},{key:"Logout",value:function(){var e=Object(v.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isOpen:!this.state.isOpen}),e.next=3,fetch("http://18.218.236.231/users/logout");case 3:return t=e.sent,e.next=6,t.json();case 6:e.sent,this.props.dispatchLogout(),this.props.history.push("/");case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(n.Component),H=Object(d.b)(function(e){return{loggedIn:e.loggedIn,isAdmin:e.isAdmin,currentUser:e.currentUser,currentUserid:e.currentUserid,placeholder:e.placeholder}},function(e){return{dispatchLogout:function(){e({type:"USER_LOGOUT",data:null})}}})(W),q=Object(y.e)(H),J=a(28),B=a(442),Q=a(446),$=a(443),K=a(444),Y=a(445),z=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(E.a)(this,Object(w.a)(t).call(this,e))).state={editMode:!1,admin_vacations_status:"",admin_edit_destination:"",admin_edit_price:"",admin_edit_description:"",admin_edit_picture:"",admin_edit_startdate:"",admin_edit_enddate:""},a.fileUpload=s.a.createRef(),a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return this.state.editMode?s.a.createElement("div",{className:"card vacation-card"},s.a.createElement("button",{onClick:this.discardEdit.bind(this),type:"button",className:"close","aria-label":"Close","data-toggle":"tooltip","data-placement":"bottom",title:"discard"},s.a.createElement("span",{"aria-hidden":"true"},s.a.createElement("i",{className:"far fa-window-close discard-button"}))),s.a.createElement("input",{name:"admin_edit_picture",placeholder:"Enter new picture",ref:this.fileUpload,onChange:this.saveAsBase64.bind(this),type:"file",accept:"image/*",className:"form-control card-img-top picture-editable-input"}),this.state&&null!==this.state.base64IFile&&s.a.createElement("img",{src:"data:image/png;base64,".concat(this.state.admin_edit_picture),alt:"",className:"picedit"}),s.a.createElement("div",{className:"card-body"},s.a.createElement("input",{className:"card-title editable-input",name:"admin_edit_destination",type:"text",placeholder:"Enter new destination",value:this.state.admin_edit_destination,onChange:this.handleChange.bind(this)}),s.a.createElement("br",null),s.a.createElement("input",{className:"card-title editable-input",name:"admin_edit_price",type:"text",placeholder:"Enter new price",value:this.state.admin_edit_price,onChange:this.handleChange.bind(this)}),s.a.createElement("br",null),s.a.createElement("input",{className:"card-title editable-input",name:"admin_edit_description",type:"text",placeholder:"Enter new description",value:this.state.admin_edit_description,onChange:this.handleChange.bind(this)}),s.a.createElement("br",null),s.a.createElement("input",{className:"card-title editable-input",name:"admin_edit_startdate",type:"text",placeholder:"Enter start date",value:this.state.admin_edit_startdate,onChange:this.handleChange.bind(this)}),s.a.createElement("br",null),s.a.createElement("input",{className:"card-title editable-input",name:"admin_edit_enddate",type:"text",placeholder:"Enter end date",value:this.state.admin_edit_enddate,onChange:this.handleChange.bind(this)}),s.a.createElement("br",null),s.a.createElement("button",{className:"btn btn-info update-button",onClick:this.UpdateVacation.bind(this),"data-toggle":"tooltip","data-placement":"bottom",title:"save"},s.a.createElement("i",{className:"far fa-save"})),s.a.createElement("button",{className:"btn btn-info delete-button",onClick:this.DeleteVacation.bind(this),"data-toggle":"tooltip","data-placement":"bottom",title:"delete"},s.a.createElement("i",{className:"far fa-trash-alt"})))):s.a.createElement("div",{className:"card vacation-card"},s.a.createElement("img",{name:"picture",className:"card-img-top",src:"data:image/png;base64,".concat(this.props.vacation.picture),alt:""}),s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},this.props.vacation.destination),s.a.createElement("h5",null,"Price: ",this.props.vacation.price,"$"),s.a.createElement("p",{className:"card-text"},this.props.vacation.description)),s.a.createElement("div",{className:"card-footer"},s.a.createElement("h5",null,this.props.vacation.startDate,"-",this.props.vacation.endDate),s.a.createElement("button",{className:"btn btn-info",onClick:this.startEdit.bind(this)},s.a.createElement("i",{className:"far fa-edit"}))))}},{key:"startEdit",value:function(){this.setState({editMode:!0})}},{key:"discardEdit",value:function(){this.setState({editMode:!1,admin_vacations_status:"",admin_edit_destination:"",admin_edit_price:"",admin_edit_description:"",admin_edit_picture:"",admin_edit_startdate:"",admin_edit_enddate:""})}},{key:"saveAsBase64",value:function(e){var t=this,a=e.target,n=Array.from(a.files)[0],s=new FileReader;s.onload=function(){var e=btoa(s.result);t.setState({admin_edit_picture:e})},s.onerror=function(){console.log("New picture was not uploaded")},s.readAsBinaryString(n)}},{key:"UpdateVacation",value:function(){""!==this.state.admin_edit_description&&""!==this.state.admin_edit_destination&&""!==this.state.admin_edit_picture&&""!==this.state.admin_edit_startdate&&""!==this.state.admin_edit_enddate&&""!==this.state.admin_edit_price?this.state.admin_edit_description.length>150?alert("Description too long"):(this.setState({editMode:!1}),this.props.dispatchUpdateVacation({id:this.props.vacation.id,description:this.state.admin_edit_description,destination:this.state.admin_edit_destination,picture:this.state.admin_edit_picture,startDate:this.state.admin_edit_startdate,endDate:this.state.admin_edit_enddate,price:this.state.admin_edit_price})):alert("Please fill out all fields")}},{key:"DeleteVacation",value:function(){var e=Object(v.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm("Are you sure you want to delete this vacation?")&&this.props.dispatchDeleteVacation({id:this.props.vacation.id,vacationid:this.props.vacation.id});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}}]),t}(n.Component),X=Object(d.b)(function(e){return{currentUser:e.currentUser,currentUserid:e.currentUserid,admin_edit_destination:e.admin_edit_destination,admin_edit_price:e.admin_edit_price,admin_edit_description:e.admin_edit_description,admin_edit_picture:e.admin_edit_picture,admin_edit_startdate:e.admin_edit_startdate,admin_edit_enddate:e.admin_edit_enddate,placeholder:e.placeholder,allvacations:e.allvacations,admin_vacations:e.admin_vacations}},function(e){return{dispatchInputChange:function(t){e(O(t))},dispatchUpdateVacation:function(t){e(function(e){return function(){var t=Object(v.a)(g.a.mark(function t(a){var n,s,r,i;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://18.218.236.231/vacations/updatevacation",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});case 2:return n=t.sent,t.next=5,n.json();case 5:return s=t.sent,alert(s.status),a({type:"UPDATE_VACATION",data:s}),t.next=10,fetch("http://18.218.236.231/vacations/adminvacations");case 10:return r=t.sent,t.next=13,r.json();case 13:i=t.sent,a({type:"FINISH_ADMIN_VACATIONS",data:i});case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}(t))},dispatchDeleteVacation:function(t){e(function(e){return function(){var t=Object(v.a)(g.a.mark(function t(a){var n,s,r,i;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://18.218.236.231/vacations/deletevacation",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});case 2:return n=t.sent,t.next=5,n.json();case 5:return s=t.sent,alert(s.status),a({type:"DELETE_VACATION",data:s}),t.next=10,fetch("http://18.218.236.231/vacations/adminvacations");case 10:return r=t.sent,t.next=13,r.json();case 13:i=t.sent,a({type:"FINISH_ADMIN_VACATIONS",data:i});case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}(t))},dispatchGetAdminVacations:function(t){e(A())}}})(z),Z=Object(y.e)(X),ee=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(E.a)(this,Object(w.a)(t).call(this,e))).state={graphMode:!1,new_destination:"",new_description:"",new_picture:"",new_startDate:"",new_endDate:"",new_price:""},a.state={modal:!1},a.toggle=a.toggle.bind(Object(V.a)(Object(V.a)(a))),a.fileUpload=s.a.createRef(),a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"toggle",value:function(){this.setState(function(e){return{modal:!e.modal,new_picture:""}})}},{key:"componentDidMount",value:function(){var e=Object(v.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.dispatchGetCountFollowers();case 2:return e.next=4,this.props.dispatchGetAdminVacations();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(this.state.graphMode){var e=this.props.followers_count.map(function(e){return{name:e.vacationid,"number of followers":e.followersCount}});return s.a.createElement("div",{className:"container-fluid graph"},s.a.createElement(B.a,{onClick:this.endGraph.bind(this)},"Back to vacations"),s.a.createElement("h2",{className:"graph-header"}," Number of followers by vacation-id:"),s.a.createElement(J.b,{width:1e3,height:500,data:e,margin:{top:50,right:0,left:140,bottom:5}},s.a.createElement(J.f,{dataKey:"name",stroke:"#4f4e4e"}),s.a.createElement(J.g,null),s.a.createElement(J.e,{wrapperStyle:{width:100,backgroundColor:"#ccc"}}),s.a.createElement(J.d,{width:100,wrapperStyle:{top:40,right:20,backgroundColor:"#f5f5f5",border:"1px solid #d5d5d5",borderRadius:3,lineHeight:"40px"}}),s.a.createElement(J.c,{stroke:"#4f4e4e",strokeDasharray:"5 5"}),s.a.createElement(J.a,{type:"monotone",dataKey:"number of followers",fill:"#4f4e4e",barSize:30}),s.a.createElement(J.c,{strokeDasharray:"3 3"}),s.a.createElement(J.g,{interval:1})))}return s.a.createElement("div",null,s.a.createElement(Q.a,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},s.a.createElement($.a,{toggle:this.toggle},"Add new vacation:"),s.a.createElement(K.a,null,s.a.createElement("div",{className:"form-label-group"},s.a.createElement("input",{name:"new_destination",onChange:this.handleChange.bind(this),type:"text",id:"new_destination",className:"form-control",required:!0,autoFocus:!0}),s.a.createElement("label",{htmlFor:"new_destination"},"Destination:")),s.a.createElement("div",{className:"form-label-group"},s.a.createElement("input",{name:"new_description",onChange:this.handleChange.bind(this),type:"text",id:"new_description",className:"form-control",required:!0}),s.a.createElement("label",{htmlFor:"new_description"},"Description:")),s.a.createElement("div",{className:"form-label-group"},s.a.createElement("input",{name:"new_price",onChange:this.handleChange.bind(this),type:"text",id:"new_price",className:"form-control",required:!0}),s.a.createElement("label",{htmlFor:"new_price"},"Price:")),s.a.createElement("div",{className:"form-label-group"},s.a.createElement("input",{name:"new_picture",ref:this.fileUpload,onChange:this.saveAsBase64.bind(this),type:"file",accept:"image/*",className:"form-control"}),this.state&&null!==this.state.base64IFile&&s.a.createElement("img",{src:"data:image/png;base64,".concat(this.state.new_picture),alt:"",className:"picupload"}),s.a.createElement("label",{htmlFor:"new_picture"},"Picture:")),s.a.createElement("div",{className:"form-label-group"},s.a.createElement("input",{name:"new_startDate",onChange:this.handleChange.bind(this),type:"text",id:"new_startDate",className:"form-control",required:!0}),s.a.createElement("label",{htmlFor:"new_startDate"},"Start date:")),s.a.createElement("div",{className:"form-label-group"},s.a.createElement("input",{name:"new_endDate",onChange:this.handleChange.bind(this),type:"text",id:"new_endDate",className:"form-control",required:!0}),s.a.createElement("label",{htmlFor:"new_endDate"},"Start date:"))),s.a.createElement(Y.a,null,s.a.createElement(B.a,{color:"primary",onClick:this.addNewVacation.bind(this)},"Save")," ",s.a.createElement(B.a,{color:"secondary",onClick:this.toggle},"Cancel"))),s.a.createElement("div",{className:"container"},s.a.createElement("header",{className:"jumbotron jumbo-admin"},s.a.createElement("h1",{className:"display-3"},"Welcome ",this.props.currentUser),s.a.createElement("p",{className:"lead"},"Add, edit, delete or send updates to all followers!"),s.a.createElement(B.a,{className:"btn btn-info graph-btn",onClick:this.startGraph.bind(this)},"Watch followers-report"),s.a.createElement(B.a,{className:"btn btn-info add-btn",color:"info",onClick:this.toggle},"Add new vacation")),s.a.createElement("div",{className:"container admin-vacations"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{class:"col"},this.props.admin_vacations.map(function(e){return s.a.createElement(Z,{key:e.id,vacation:e})}))))))}},{key:"saveAsBase64",value:function(e){var t=this,a=e.target,n=Array.from(a.files)[0],s=new FileReader;s.onload=function(){var e=btoa(s.result);t.setState({new_picture:e})},s.onerror=function(){console.log("New picture was not uploaded")},s.readAsBinaryString(n)}},{key:"startGraph",value:function(){this.setState({graphMode:!0})}},{key:"endGraph",value:function(){this.setState({graphMode:!1})}},{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"addNewVacation",value:function(){""!==this.state.new_destination&&""!==this.state.new_description&&""!==this.state.new_picture&&""!==this.state.new_startDate&&""!==this.state.new_endDate&&""!==this.state.new_price?this.state.new_description.length>150?alert("Description too long"):(this.setState({modal:!1}),this.props.dispatchAddVac({description:this.state.new_destination,destination:this.state.new_description,picture:this.state.new_picture,startDate:this.state.new_startDate,endDate:this.state.new_endDate,price:this.state.new_price})):alert("Please fill out all fields")}}]),t}(n.Component),te=Object(d.b)(function(e){return{isAdmin:e.isAdmin,loggedIn:e.loggedIn,currentUser:e.currentUser,currentUserid:e.currentUserid,admin_vacations:e.admin_vacations,all_followed_vacations:e.all_followed_vacations,followers_count:e.followers_count,new_destination:e.new_destination,new_description:e.new_description,new_picture:e.new_picture,new_startDate:e.new_startDate,new_endDate:e.new_endDate,new_price:e.new_price,user_followed_vacations:e.user_followed_vacations,allvacations:e.allvacations,placeholder:e.placeholder}},function(e){return{dispatchGetAdminVacations:function(t){e(A())},dispatchGetCountFollowers:function(t){e(function(){var e=Object(v.a)(g.a.mark(function e(t){var a,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://18.218.236.231/vacations/countfollowers");case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,t({type:"COUNT_FOLLOWERS",data:n}),console.log(n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},dispatchAdminLogin:function(t){e(U(t))},dispatchAddVac:function(t){e(function(e){return function(){var t=Object(v.a)(g.a.mark(function t(a){var n,s,r,i;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://18.218.236.231/vacations/add",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});case 2:return n=t.sent,t.next=5,n.json();case 5:return s=t.sent,alert(s.status),a({type:"ADDED_NEW_VACATION",data:s}),t.next=10,fetch("http://18.218.236.231/vacations/adminvacations");case 10:return r=t.sent,t.next=13,r.json();case 13:i=t.sent,a({type:"FINISH_ADMIN_VACATIONS",data:i});case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}(t))},dispatchInputChange:function(t){e(O(t))}}})(ee),ae=Object(y.e)(te),ne=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(E.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(s)))).state={},a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"card vacation-card"},s.a.createElement("img",{name:"picture",className:"card-img-top",src:"data:image/png;base64,".concat(this.props.vacation.picture),alt:""}),s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},this.props.vacation.destination),s.a.createElement("h5",null,"Price: ",this.props.vacation.price,"$"),s.a.createElement("p",{className:"card-text"},this.props.vacation.description)),s.a.createElement("div",{className:"card-footer"},s.a.createElement("h5",null,this.props.vacation.startDate,"-",this.props.vacation.endDate),s.a.createElement("button",{className:"btn btn-info",onClick:this.followVacation.bind(this)},s.a.createElement("i",{className:"far fa-thumbs-up"}))))}},{key:"followVacation",value:function(){var e=Object(v.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.dispatchFollowVacation({userid:this.props.currentUserid,vacationid:this.props.vacation.id,destination:this.props.vacation.destination});case 2:return e.next=4,this.props.dispatchGetUserVacations(this.props.currentUserid);case 4:return e.next=6,this.props.refresh();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(n.Component),se=Object(d.b)(function(e){return{currentUser:e.currentUser,currentUserid:e.currentUserid,placeholder:e.placeholder,userid:e.currentUserid}},function(e){return{dispatchFollowVacation:function(t){var a;e((a=t,function(){var e=Object(v.a)(g.a.mark(function e(t){var n,s;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://18.218.236.231/vacations/followvacation",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return n=e.sent,e.next=5,n.json();case 5:s=e.sent,alert(s.status),t({type:"FOLLOW_VACATION",data:s});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()))},dispatchGetUserVacations:function(t){e(C(t))}}})(ne),re=Object(y.e)(se),ie=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(E.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(s)))).state={},a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"card vacation-card"},s.a.createElement("img",{name:"picture",className:"card-img-top",src:"data:image/png;base64,".concat(this.props.vacation.picture),alt:""}),s.a.createElement("div",{className:"card-body"},s.a.createElement("span",{className:"spanthumbs text-info"},s.a.createElement("span",{className:"spanthumbs text-info"},s.a.createElement("i",{className:"fas fa-thumbs-up"}))),s.a.createElement("h5",{className:"card-title"},this.props.vacation.destination),s.a.createElement("h5",null,"Price: ",this.props.vacation.price,"$"),s.a.createElement("p",{className:"card-text"},this.props.vacation.description)),s.a.createElement("div",{className:"card-footer"},s.a.createElement("h5",null,this.props.vacation.startDate,"-",this.props.vacation.endDate),s.a.createElement("button",{className:"btn btn-info",onClick:this.unfollowVacation.bind(this)},s.a.createElement("i",{className:"far fa-thumbs-down"}))))}},{key:"unfollowVacation",value:function(){var e=Object(v.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.dispatchUnfollowVacation({userid:this.props.currentUserid,vacationid:this.props.vacation.id,destination:this.props.vacation.destination});case 2:return e.next=4,this.props.dispatchGetUserVacations(this.props.currentUserid);case 4:return e.next=6,this.props.refresh();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(n.Component),ce=Object(d.b)(function(e){return{placeholder:e.placeholder,currentUser:e.currentUser,currentUserid:e.currentUserid,userid:e.currentUserid}},function(e){return{dispatchUnfollowVacation:function(t){var a;e((a=t,function(){var e=Object(v.a)(g.a.mark(function e(t){var n,s;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://18.218.236.231/vacations/unfollowvacation",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return n=e.sent,e.next=5,n.json();case 5:s=e.sent,alert(s.status),t({type:"UNFOLLOW_VACATION",data:s});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()))},dispatchGetUserVacations:function(t){e(C(t))}}})(ie),oe=Object(y.e)(ce),le=a(186),de=a.n(le)()("http://localhost"),ue=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(E.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(s)))).state={msg:""},a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=Object(v.a)(g.a.mark(function e(){var t=this;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.refresh(),de.on("updated_vacations",function(e){alert(e),t.props.dispatchGetUserVacations(t.props.currentUserid)});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(v.a)(g.a.mark(function e(){var t,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://18.218.236.231/users/usersession",{});case 2:return t=e.sent,e.next=5,t.json();case 5:(a=e.sent).loggedIn&&this.props.dispatchUserLogin(a),this.props.dispatchGetUserVacations(this.props.currentUserid);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.props.loggedIn?0==this.props.user_followed_vacations?s.a.createElement("div",{className:"container-fluid"},s.a.createElement("h2",null,"Follow our vacations and stay updated!"),s.a.createElement("div",{className:"container all-vacations"},s.a.createElement("h2",null,"More vacations:"),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},this.props.allvacations.map(function(t){return s.a.createElement(re,{key:t.id,vacation:t,refresh:e.refresh.bind(e)})}))))):s.a.createElement("div",{className:"container-fluid"},s.a.createElement("div",{className:"container fav-vacations"},s.a.createElement("h2",null,"Your favorite vacations :"),s.a.createElement("h1",null,this.props.user_vacations_status),console.log(this.props),s.a.createElement("div",{className:"row"},s.a.createElement("div",{class:"col"},this.props.user_followed_vacations.map(function(t){return s.a.createElement(oe,{key:t.id,vacation:t,refresh:e.refresh.bind(e)})})))),s.a.createElement("div",{className:"container all-vacations"},s.a.createElement("h2",null,"More vacations:"),s.a.createElement("div",{className:"row"},s.a.createElement("div",{class:"col"},this.props.allvacations.map(function(t){return s.a.createElement(re,{key:t.id,vacation:t,refresh:e.refresh.bind(e)})}))))):s.a.createElement("div",{className:"container"},s.a.createElement("header",{className:"jumbotron main-pic"},s.a.createElement("h1",{className:"display-3"},"Welcome guest"),s.a.createElement("div",{className:"main"},"Join Dreamy!",s.a.createElement(c.b,{to:"/signup",className:"btn btn-ingo btn-lg signup-jumbo"},"Sign-up")),s.a.createElement("div",{className:"main"},"Already a member?",s.a.createElement(c.b,{to:"/signin",className:"btn btn-ingo btn-lg signin-jumbo"},"Sign-in"))))}}]),t}(n.Component),pe=Object(d.b)(function(e){return{loggedIn:e.loggedIn,currentUser:e.currentUser,currentUserid:e.currentUserid,allvacations:e.allvacations,user_followed_vacations:e.user_followed_vacations,user_vacations_status:e.user_vacations_status,placeholder:e.placeholder}},function(e){return{dispatchGetUserVacations:function(t){e(C(t))},dispatchUserLogin:function(t){e(j(t))}}})(ue),me=Object(y.e)(pe),he=function(e){function t(){return Object(_.a)(this,t),Object(E.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return s.a.createElement("footer",{className:"footer py-2 w-100 fixed-bottom"},s.a.createElement("div",{className:"text-center text-muted"},"Copyright \xa9 Tal Diamant-Sabag 2019 "))}}]),t}(n.Component),fe=Object(y.e)(he),ge=function(e){function t(){return Object(_.a)(this,t),Object(E.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=Object(v.a)(g.a.mark(function e(){var t,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://18.218.236.231/users/usersession");case 2:return t=e.sent,e.next=5,t.json();case 5:(a=e.sent).loggedIn&&this.props.dispatchUserLogin(a);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",{className:"container-fluid welcome"},s.a.createElement(q,null),s.a.createElement(y.c,null,s.a.createElement(y.a,{exact:!0,path:"/",component:me}),s.a.createElement(y.a,{path:"/signup",component:T}),s.a.createElement(y.a,{path:"/signin",component:x}),s.a.createElement(y.a,{patj:"/admin",component:ae})),s.a.createElement(fe,null))}}]),t}(n.Component),ve=Object(d.b)(function(e){return{placeholder:e.placeholder,loggedIn:e.loggedIn}},function(e){return{dispatchGetUserVacations:function(){e(C())},dispatchUserLogin:function(t){e(j(t))}}})(ge),_e=Object(y.e)(ve);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(434);var be=Object(l.createStore)(m,Object(o.composeWithDevTools)(Object(l.applyMiddleware)(h.a)));i.a.render(s.a.createElement(d.a,{store:be},s.a.createElement(c.a,null,s.a.createElement(_e,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[212,1,2]]]);
//# sourceMappingURL=main.d78bd8d8.chunk.js.map